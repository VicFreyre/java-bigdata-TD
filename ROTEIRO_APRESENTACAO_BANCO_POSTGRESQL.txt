ROTEIRO DE APRESENTAÇÃO: BANCO DE DADOS POSTGRESQL

1. INTRODUÇÃO AO BANCO DE DADOS
O sistema utiliza o PostgreSQL como banco de dados relacional para armazenar informações de alunos, cursos e matrículas. O PostgreSQL é conhecido por sua robustez, segurança e suporte a recursos avançados como views, triggers e procedures.

2. ESTRUTURA DO BANCO DE DADOS
Principais tabelas:
- alunos: Armazena dados dos alunos (id, nome, idade, email, telefone, etc.)
- cursos: Armazena dados dos cursos (id, nome, descrição, carga horária, categoria, etc.)
- matriculas: Registra as matrículas dos alunos nos cursos (id, id_aluno, id_curso, data_matricula, status, data_cancelamento)

Relacionamentos:
- Um aluno pode ter várias matrículas (1:N)
- Um curso pode ter várias matrículas (1:N)
- As tabelas estão ligadas por chaves estrangeiras (id_aluno, id_curso)

Recursos avançados:
- Índices para busca rápida
- View `vw_matriculas_detalhes` para consultas otimizadas
- Trigger `trg_definir_dados_matricula` para definir dados automaticamente
- Procedure `realizar_matricula` para lógica de matrícula

3. CONEXÃO DO BANCO DE DADOS COM O SISTEMA
A conexão é configurada no arquivo `application.properties`:
```properties
spring.datasource.url=jdbc:postgresql://localhost:5432/sistema_matriculas
spring.datasource.username=postgres
spring.datasource.password=1234
```
O Spring Boot utiliza essas configurações para conectar-se ao PostgreSQL via JDBC.

4. INTEGRAÇÃO NO CÓDIGO
- O backend usa Spring Data JPA para mapear entidades Java para tabelas do banco.
- As entidades possuem anotações JPA (@Entity, @Table, @Id, @ManyToOne, etc.) que definem o relacionamento com o banco.
- Os repositórios estendem `JpaRepository`, permitindo operações CRUD sem necessidade de SQL manual.

Exemplo de entidade:
```java
@Entity
@Table(name = "matriculas")
public class Matricula {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    @ManyToOne
    @JoinColumn(name = "id_aluno")
    private Aluno aluno;
    @ManyToOne
    @JoinColumn(name = "id_curso")
    private Curso curso;
    // ...
}
```

Exemplo de repositório:
```java
public interface MatriculaRepositorio extends JpaRepository<Matricula, Long> {
    List<Matricula> findByAlunoId(Long idAluno);
}
```

5. FLUXO DE DADOS
- O controlador recebe a requisição do usuário
- O serviço processa a lógica de negócio
- O repositório executa operações no banco de dados
- O resultado é retornado ao usuário

6. EXECUÇÃO DO SCRIPT SQL
O arquivo `banco.sql` é executado automaticamente na primeira inicialização, criando tabelas, índices, views, triggers e procedures.

7. CONCLUSÃO
A integração entre o backend Java/Spring Boot e o PostgreSQL é feita de forma transparente e segura, utilizando ORM para facilitar o desenvolvimento e garantir integridade dos dados.